(function(e){function t(t){for(var r,i,c=t[0],u=t[1],s=t[2],d=0,f=[];d<c.length;d++)i=c[d],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&f.push(a[i][0]),a[i]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);l&&l(t);while(f.length)f.shift()();return o.push.apply(o,s||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,c=1;c<n.length;c++){var u=n[c];0!==a[u]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},a={app:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/js-camera/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],u=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var l=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("cd49")},"0b71":function(e,t,n){"use strict";var r=n("aa41"),a=n.n(r);t["default"]=a.a},1081:function(e,t,n){"use strict";var r=n("787e"),a=n.n(r);a.a},"19bb":function(e,t,n){"use strict";var r=n("5045"),a=n.n(r);t["default"]=a.a},5045:function(e,t,n){e.exports={wrapper:"CameraFeedErrorPresenter_wrapper_3rzdQ",icon:"CameraFeedErrorPresenter_icon_3pgVd",friendlyMessage:"CameraFeedErrorPresenter_friendlyMessage_1NMcK",errorMessage:"CameraFeedErrorPresenter_errorMessage_oWmTl"}},"5c0b":function(e,t,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"787e":function(e,t,n){},"80f7":function(e,t,n){"use strict";var r=n("c4ba"),a=n.n(r);t["default"]=a.a},9148:function(e,t,n){"use strict";var r=n("a02f"),a=n.n(r);a.a},"9c0c":function(e,t,n){},a02f:function(e,t,n){},aa41:function(e,t,n){e.exports={wrapper:"CameraStreamConfigurator_wrapper_2w64O",button:"CameraStreamConfigurator_button_2gZJ9",configurator:"CameraStreamConfigurator_configurator_2af5F"}},c4ba:function(e,t,n){e.exports={wrapper:"CameraStreamConfiguratorMenu_wrapper_1iNTg",button:"CameraStreamConfiguratorMenu_button_3ci_f",input:"CameraStreamConfiguratorMenu_input_2k8YO"}},cd49:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("QrScanner",{attrs:{disabled:e.disabled}})],1)},o=[],i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("QrInput",{attrs:{disabled:e.disabled},on:{change:function(t){e.data=t}}}),e.data?n("ContentRenderer",{attrs:{data:e.data}}):e._e()],1)},c=[],u=function(){var e=this,t=this,n=t.$createElement,r=t._self._c||n;return r("div",[r("CameraFeed",{attrs:{autoplay:""},on:{ready:function(t){return e.cameraFeedVideoElement=t}}}),r("QrReader",{attrs:{disabled:t.disabled,videoElement:t.cameraFeedVideoElement},on:{change:function(e){return t.$emit("change",e)}}})],1)},s=[],l=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("canvas",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"canvas",staticClass:"canvas"})},d=[],f=(n("a9e3"),n("d3b7"),n("96cf"),n("c964")),v=n("ecec"),p=n.n(v),m=function(){var e=Object(f["a"])(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){return setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=r["a"].extend({props:{videoElement:{type:HTMLVideoElement,default:null},scanInterval:{type:Number,default:500},disabled:{type:Boolean,default:!1}},data:function(){return{data:null}},computed:{canScan:function(){return!this.disabled&&!!this.videoElement}},watch:{data:function(e){var t=e.data;this.$emit("change",t)},videoElement:function(e){e&&this.setupCanvas(e)}},methods:{coordinateScanning:function(e,t){var n=this;if(this.canScan){e.drawImage(t,0,0,t.videoWidth,t.videoHeight);var r=e.getImageData(0,0,t.videoWidth,t.videoHeight);return new Promise((function(e){setTimeout((function(){var a=p()(r.data,t.videoWidth,t.videoHeight);a&&a.data&&(n.data=a),e()}))})).catch((function(e){console.error(e)}))}},setupCanvas:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.$refs.canvas,a=r.getContext("2d"),a){n.next=4;break}return n.abrupt("return");case 4:a.canvas.width=e.videoWidth,a.canvas.height=e.videoHeight,a.clearRect(0,0,e.videoWidth,e.videoHeight),t.doScan(a,e);case 8:case"end":return n.stop()}}),n)})))()},doScan:function(e,t){var n=this;return Object(f["a"])(regeneratorRuntime.mark((function r(){var a,o,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=performance.now(),r.next=3,n.coordinateScanning(e,t);case 3:if(o=performance.now()-a,i=n.scanInterval,!(o<i)){r.next=8;break}return r.next=8,m(i-o);case 8:n.doScan(e,t);case 9:case"end":return r.stop()}}),r)})))()}}}),g=h,b=(n("ecd6"),n("2877")),_=Object(b["a"])(g,l,d,!1,null,"5fe33e8b",null),w=_.exports,y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("CameraStreamReceiver",{scopedSlots:e._u([{key:"default",fn:function(t){var r=t.stream,a=t.error;return[e.mediaDevicesSupportError||a?n("CameraFeedErrorPresenter",{attrs:{error:e.mediaDevicesSupportError||a}}):n("CameraVideo",{attrs:{stream:r},on:{ready:function(t){return e.$emit("ready",t)}}})]}}])})},C=[],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("video",{ref:"video",staticClass:"video",attrs:{autoplay:""},on:{loadeddata:e.loadeddata}})},x=[],O=r["a"].extend({props:{stream:{type:MediaStream,default:null}},watch:{stream:function(e){this.updateStream(e)}},mounted:function(){this.updateStream(this.stream)},methods:{loadeddata:function(){var e=this.$refs.video;this.$emit("ready",e)},updateStream:function(e){var t=this.$refs.video;t.srcObject=e}}}),j=O,k=(n("1081"),Object(b["a"])(j,S,x,!1,null,"e2c15996",null)),$=k.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.wrapper},[n("div",{class:e.$style.icon},[e._v("ðŸ˜Ÿ")]),n("div",{class:e.$style.friendlyMessage},[e._v("I cannot access to the camera.")]),n("div",{class:e.$style.errorMessage},[e._v(" "+e._s(e.error.message)+" ")])])},M=[],I=r["a"].extend({props:{error:{type:Error,default:void 0}}}),F=I,P=n("19bb");function R(e){this["$style"]=P["default"].locals||P["default"]}var D=Object(b["a"])(F,E,M,!1,R,null,null),U=D.exports,V=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("CameraStreamConfigurator",{on:{input:e.getCamera},model:{value:e.videoStreamConstraints,callback:function(t){e.videoStreamConstraints=t},expression:"videoStreamConstraints"}}),e._t("default",null,null,e.slotData)],2)},N=[],B=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.wrapper},[n("button",{class:e.$style.button,on:{click:function(t){e.showConfiguratorUi=!e.showConfiguratorUi}}},[e._v("âš™")]),e.showConfiguratorUi?n("CameraStreamConfiguratorMenu",{ref:"configurator",class:e.$style.configurator,attrs:{value:e.value},on:{input:e.updateConfig,close:function(t){e.showConfiguratorUi=!1}}}):e._e()],1)},T=[],Q=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{class:e.$style.wrapper},[n("button",{class:e.$style.button,on:{click:function(t){return e.$emit("close")}}},[e._v("âŒ")]),n("form",[n("label",[n("h5",[e._v("Video source")]),n("select",{class:e.$style.input,on:{input:function(t){return e.handleInput("videoSource",t)}}},e._l([{label:"Choose a device",deviceId:null}].concat(e.devices),(function(t){return n("option",{key:t.deviceId,attrs:{disabled:!t.deviceId},domProps:{value:t.deviceId,selected:e.selectedDeviceId===t.deviceId}},[e._v(" "+e._s(t.label)+" ")])})),0)]),n("h5",[e._v("Facing")]),n("label",[n("input",{attrs:{type:"radio",name:"orientation",value:"user"},domProps:{checked:"user"===e.selectedFacingMode},on:{input:function(t){return e.handleInput("orientation",t)}}}),e._v("Front ")]),n("label",[n("input",{attrs:{type:"radio",name:"orientation",value:"environment"},domProps:{checked:"environment"===e.selectedFacingMode},on:{input:function(t){return e.handleInput("orientation",t)}}}),e._v("Back ")])])])}),A=[],H=(n("4de4"),n("f3f3")),W=n("0122"),J=n("276c"),L=n("e954"),q="video_stream_constrain",G=function(){function e(){Object(J["a"])(this,e),this.config=this.load()}return Object(L["a"])(e,[{key:"store",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{return localStorage.setItem(q,JSON.stringify(e)),!0}catch(n){if(console.error(n),t)throw n;return!1}}},{key:"load",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=localStorage.getItem(q);if(null==n)return e.defaultConfig;try{return JSON.parse(n)}catch(r){if(this.reset(),console.error(r),t)throw r}}},{key:"reset",value:function(){localStorage.removeItem(q)}}]),e}();G.defaultConfig={facingMode:"environment",width:{ideal:640},height:{ideal:480}};var z=function(e){return Array.isArray(e)?e[0]:e},K=function(e,t){var n,r;if("object"!==Object(W["a"])(e))return null;var a=z(e[t]);return a?"string"===typeof a?a:z(null!==(n=null!==(r=a.exact)&&void 0!==r?r:a.ideal)&&void 0!==n?n:null):null},Y=r["a"].extend({props:{value:{type:Object,required:!0}},data:function(){return{devices:[]}},mounted:function(){var e=this;return Object(f["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,navigator.mediaDevices.enumerateDevices();case 2:t.t0=function(e){var t=e.kind;return"videoinput"===t},e.devices=t.sent.filter(t.t0);case 4:case"end":return t.stop()}}),t)})))()},computed:{selectedDeviceId:function(){return K(this.value,"deviceId")},selectedFacingMode:function(){return K(this.value,"facingMode")}},methods:{handleInput:function(e,t){if("videoSource"===e){var n=t.target;this.updateValue({deviceId:n.value})}else if("orientation"===e){var r=t.target;this.updateValue({facingMode:r.value})}},updateValue:function(e){var t="object"===Object(W["a"])(this.value)?this.value:G.defaultConfig;this.$emit("input",Object(H["a"])({},t,{},e))}}}),Z=Y,X=n("80f7");function ee(e){this["$style"]=X["default"].locals||X["default"]}var te=Object(b["a"])(Z,Q,A,!1,ee,null,null),ne=te.exports,re=new G,ae=r["a"].extend({components:{CameraStreamConfiguratorMenu:ne},props:{value:{type:Object,default:void 0}},data:function(){return{showConfiguratorUi:!1}},created:function(){this.emitConfig()},mounted:function(){window.addEventListener("click",this.handleBackgroundClick)},beforeDestroy:function(){window.removeEventListener("click",this.handleBackgroundClick)},methods:{updateConfig:function(e){re.store(e),this.emitConfig()},emitConfig:function(){this.$emit("input",re.load())},handleBackgroundClick:function(e){var t=this;this.showConfiguratorUi&&(e.composedPath().find((function(e){return e===t.$el}))||(this.showConfiguratorUi=!1))}}}),oe=ae,ie=n("0b71");function ce(e){this["$style"]=ie["default"].locals||ie["default"]}var ue=Object(b["a"])(oe,B,T,!1,ce,null,null),se=ue.exports,le=r["a"].extend({components:{CameraStreamConfigurator:se},data:function(){return{error:null,stream:null,videoStreamConstraints:void 0}},mounted:function(){this.getCamera(this.videoStreamConstraints)},methods:{getCamera:function(e){var t=this;return Object(f["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.error=null,n.prev=1,n.next=4,navigator.mediaDevices.getUserMedia({video:e});case 4:t.stream=n.sent,n.next=11;break;case 7:n.prev=7,n.t0=n["catch"](1),t.error=n.t0,t.stream=null;case 11:case"end":return n.stop()}}),n,null,[[1,7]])})))()}},computed:{slotData:function(){return null!==this.error?{error:this.error,stream:null}:{error:null,stream:this.stream}}}}),de=le,fe=Object(b["a"])(de,V,N,!1,null,null,null),ve=fe.exports,pe=r["a"].extend({components:{CameraVideo:$,CameraStreamReceiver:ve,CameraFeedErrorPresenter:U},computed:{hasGetUserMedia:function(){return!(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)},mediaDevicesSupportError:function(){return this.hasGetUserMedia?null:new Error("mediaDevices is not supported")}}}),me=pe,he=Object(b["a"])(me,y,C,!1,null,null,null),ge=he.exports,be=r["a"].extend({components:{QrReader:w,CameraFeed:ge},props:{disabled:{type:Boolean,default:!1}},data:function(){return{cameraFeedVideoElement:null}}}),_e=be,we=Object(b["a"])(_e,u,s,!1,null,"811292ae",null),ye=we.exports,Ce=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content"},[e.isUrl?n("a",{staticClass:"content-anchor content-text",attrs:{href:e.data,target:"_blank",rel:"noopener"}},[e._v(e._s(e.data))]):n("div",{staticClass:"content-text"},[e._v(" "+e._s(e.data)+" ")])])},Se=[],xe=(n("3ca3"),n("ddb0"),n("2b3d"),r["a"].extend({props:{data:{type:String,default:null}},computed:{isUrl:function(){try{return new URL(this.data),!0}catch(e){return!1}}}})),Oe=xe,je=(n("9148"),Object(b["a"])(Oe,Ce,Se,!1,null,null,null)),ke=je.exports,$e=r["a"].extend({components:{QrInput:ye,ContentRenderer:ke},props:{disabled:{type:Boolean,default:!1}},data:function(){return{data:null}}}),Ee=$e,Me=Object(b["a"])(Ee,i,c,!1,null,null,null),Ie=Me.exports,Fe=r["a"].extend({name:"App",components:{QrScanner:Ie},data:function(){return{disabled:!1}},mounted:function(){var e=this;document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState?e.disabled=!0:"visible"===document.visibilityState&&(e.disabled=!1)}))}}),Pe=Fe,Re=(n("5c0b"),Object(b["a"])(Pe,a,o,!1,null,null,null)),De=Re.exports,Ue=n("9483");Object(Ue["a"])("".concat("/js-camera/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},registered:function(){console.log("Service worker has been registered.")},cached:function(){console.log("Content has been cached for offline use.")},updatefound:function(){console.log("New content is downloading.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["a"].config.productionTip=!1,new r["a"]({render:function(e){return e(De)}}).$mount("#app")},ecd6:function(e,t,n){"use strict";var r=n("ffa4"),a=n.n(r);a.a},ffa4:function(e,t,n){}});
//# sourceMappingURL=app.9b42a826.js.map